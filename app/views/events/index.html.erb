<div class="min-h-screen bg-slate-50">
  <div class="max-w-5xl mx-auto px-4 py-8">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl sm:text-3xl font-bold">イベント一覧</h1>
        <p class="text-sm text-slate-500 mt-1">
          登録されているダーツイベントを表示しています。
        </p>
      </div>

      <div class="flex items-center gap-2 text-xs">
        <% if user_signed_in? && current_user.shop_owner? %>
          <%= link_to "イベントを投稿する",
                new_event_path,
                class: "inline-flex items-center rounded-full bg-black px-4 py-2 font-semibold text-white hover:bg-slate-800" %>
        <% else %>
          <%= link_to "店舗登録してイベント投稿",
                new_shop_path,
                class: "inline-flex items-center rounded-full border border-slate-300 px-4 py-2 font-semibold text-slate-700 hover:bg-slate-50" %>
        <% end %>
      </div>
    </div>

    <% if @events.any? %>
      <div class="space-y-4">
        <% @events.each do |event| %>
          <%= link_to event_path(event),
                class: "block bg-white rounded-2xl shadow-sm p-4 sm:p-5 hover:shadow-md transition" do %>
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
              <div class="flex-1">
                <p class="text-base sm:text-lg font-semibold text-slate-900 mb-1">
                  <%= event.title %>
                </p>

                <p class="text-xs text-slate-500 mb-1">
                  主催者：<%= event.shop.user.name %>
                </p>
                <% if event.location.present? %>
                  <p class="text-xs text-slate-500">
                    開催場所：<%= event.location %>
                  </p>
                <% end %>

                <% if event.prefecture.present? || event.city.present? %>
                  <p class="text-xs text-slate-400 mt-1">
                    <%= [event.prefecture, event.city].compact.join %>
                  </p>
                <% end %>
              </div>

              <div class="text-right text-xs sm:text-sm text-slate-600 min-w-[140px]">
                <div class="mb-1">
                  <p class="text-[11px] text-slate-400">開始日時</p>
                  <% if event.start_datetime.present? %>
                    <p><%= l event.start_datetime, format: :short %></p>
                  <% else %>
                    <p>未設定</p>
                  <% end %>
                </div>

                <div>
                  <p class="text-[11px] text-slate-400">参加費</p>
                  <% if event.fee.present? %>
                    <p><%= number_with_delimiter(event.fee) %> 円</p>
                  <% else %>
                    <p>未設定</p>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="mt-8 bg-white rounded-2xl shadow-sm p-6 text-sm text-slate-600">
        <p class="mb-2">まだイベントが登録されていません。</p>
        <% if user_signed_in? && current_user.shop_owner? %>
          <p>
            <%= link_to "最初のイベントを投稿する",
                  new_event_path,
                  class: "text-sky-600 font-semibold hover:underline" %>
          </p>
        <% else %>
          <p>
            イベントを投稿するにはまず
            <%= link_to "店舗登録",
                  new_shop_path,
                  class: "text-sky-600 font-semibold hover:underline" %>
            が必要です。
          </p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>