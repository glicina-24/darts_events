<%= link_to event_path(event),
      class: "group block rounded-2xl bg-white border-2 border-slate-200 shadow-md overflow-hidden hover:shadow-xl hover:border-sky-300 hover:-translate-y-1 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-sky-400/50",
      aria_label: "#{event.title}の詳細を見る" do %>

  <div class="relative aspect-16/10 w-full overflow-hidden bg-linear-to-br from-slate-100 to-slate-200">
    <% if event.images.attached? %>
      <% img = event.images.first %>
      <%= image_tag img.variant(resize_to_fill: [800, 450]),
            class: "h-full w-full object-cover transition-transform duration-500 group-hover:scale-110",
            alt: "#{event.title}のイメージ画像",
            loading: "lazy" %>
    <% else %>
      <div class="h-full w-full bg-linear-to-br from-sky-100 via-emerald-100 to-slate-100 flex items-center justify-center">
        <span class="text-6xl opacity-40">🎯</span>
      </div>
    <% end %>
    
    <% if event.created_at > 3.days.ago %>
      <div class="absolute top-3 right-3 px-3 py-1 rounded-full bg-linear-to-r from-red-500 to-pink-500 text-white text-xs font-bold shadow-lg">
        NEW
      </div>
    <% end %>
  </div>

  <div class="p-4">
    <h3 class="text-base font-bold text-slate-900 line-clamp-2 leading-snug group-hover:text-sky-600 transition-colors">
      <%= event.title %>
    </h3>

    <div class="mt-3 space-y-2">
      <div class="flex items-start gap-2">
        <span class="text-base mt-0.5 shrink-0">🏠</span>
        <span class="text-sm text-slate-700 font-medium leading-snug">
          <%= event.shop&.name || "店舗未登録" %>
        </span>
      </div>
      
      <div class="flex items-start gap-2">
        <span class="text-base mt-0.5 shrink-0">📅</span>
        <span class="text-sm text-slate-700 font-medium leading-snug">
          <%= event.start_datetime ? l(event.start_datetime, format: :short) : "日時未定" %>
        </span>
      </div>
      
      <div class="flex items-start gap-2">
        <span class="text-base mt-0.5 shrink-0">📍</span>
        <span class="text-sm text-slate-700 font-medium leading-snug">
          <%= event.prefecture.presence || event.shop&.prefecture.presence || "未設定" %>
        </span>
      </div>
    </div>

    <div class="mt-4 pt-3 border-t border-slate-100 flex items-center justify-between">
      <div class="flex items-center gap-1.5 text-slate-600">
        <span class="text-sm">👥</span>
        <span class="text-sm font-semibold">
          <%= event.capacity.present? ? "#{event.capacity}人" : "定員未設定" %>
        </span>
      </div>

      <span class="inline-flex items-center gap-1 text-sm font-bold text-sky-600 group-hover:gap-2 transition-all">
        <span>詳細を見る</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
        </svg>
      </span>
    </div>
  </div>
<% end %>
