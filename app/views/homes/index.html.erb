<div class="min-h-screen flex flex-col bg-slate-50">
  <main class="flex-1">

    <!-- Hero -->
    <section class="relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-900 to-slate-700"></div>
      <div class="absolute -top-24 -right-24 h-72 w-72 rounded-full bg-white/10 blur-3xl"></div>
      <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full bg-white/10 blur-3xl"></div>

      <div class="relative max-w-6xl mx-auto px-4 py-14 sm:py-20">
        <div class="max-w-2xl">
          <p class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-white/90">
            🎯 Darts Events
            <span class="h-1 w-1 rounded-full bg-white/60"></span>
            近くのイベントを見つけよう
          </p>

          <h1 class="mt-4 text-3xl sm:text-5xl font-extrabold tracking-tight text-white">
            ダーツイベントを、
            <span class="text-white/80">サクッと探す・投稿する</span>
          </h1>

          <p class="mt-4 text-sm sm:text-base text-white/70 leading-relaxed">
            店舗主催のトーナメントやハウスイベントをまとめてチェック。
            気になるイベントはお気に入りして、あとで見返せます。
          </p>

          <div class="mt-7 flex flex-wrap gap-3">
            <%= link_to "イベントを探す",
                  events_path,
                  class: "inline-flex items-center justify-center px-5 py-2.5 rounded-full bg-white text-slate-900 text-sm font-semibold hover:bg-white/90" %>

            <% if user_signed_in? && current_user.shop_owner? %>
              <%= link_to "イベントを投稿する",
                    new_event_path,
                    class: "inline-flex items-center justify-center px-5 py-2.5 rounded-full bg-black/40 border border-white/20 text-white text-sm font-semibold hover:bg-black/55" %>
            <% else %>
              <%= link_to "店舗登録して投稿する",
                    (user_signed_in? ? new_shop_path : new_user_session_path),
                    class: "inline-flex items-center justify-center px-5 py-2.5 rounded-full bg-black/40 border border-white/20 text-white text-sm font-semibold hover:bg-black/55" %>
            <% end %>

            <%= link_to "店舗一覧",
                  shops_path,
                  class: "inline-flex items-center justify-center px-5 py-2.5 rounded-full bg-transparent border border-white/25 text-white text-sm font-semibold hover:bg-white/10" %>
          </div>

          <div class="mt-6 flex flex-wrap gap-x-6 gap-y-2 text-xs text-white/70">
            <span>✅ 開催日・都道府県で絞り込み</span>
            <span>✅ 画像つきで見やすい</span>
            <span>✅ お気に入り対応</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Top Pick -->
    <section class="max-w-6xl mx-auto px-4 py-10">
      <div class="flex items-end justify-between gap-3 mb-6">
        <div>
          <h2 class="text-2xl font-bold">Top Pick!</h2>
          <p class="text-sm text-slate-500 mt-1">注目イベントをピックアップ</p>
        </div>

        <%= link_to "もっと見る →",
              events_path,
              class: "text-sm font-semibold text-slate-700 hover:underline" %>
      </div>

      <% if @top_events.present? %>
        <div class="grid gap-6 md:grid-cols-3">
          <% @top_events.each do |event| %>
            <%= link_to event_path(event),
                  class: "group block rounded-2xl bg-white border border-slate-100 shadow-sm overflow-hidden hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-sky-500" do %>

              <div class="relative h-36 w-full overflow-hidden">
                <% if event.images.attached? %>
                  <% img = event.images.first %>
                  <%= image_tag img.variant(resize_to_fill: [800, 360]),
                        class: "h-full w-full object-cover transition-transform duration-200 group-hover:scale-105" %>
                <% else %>
                  <div class="h-full w-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-slate-400 text-3xl">
                    🖼
                  </div>
                <% end %>
              </div>

              <div class="p-4">
                <p class="text-sm font-semibold text-slate-900 line-clamp-2">
                  <%= event.title %>
                </p>

                <div class="mt-2 space-y-1 text-xs text-slate-600">
                  <p>🏠 <%= event.shop&.name || "店舗未登録" %></p>
                  <p>📅 <%= event.start_datetime ? l(event.start_datetime, format: :short) : "日時未定" %></p>
                  <p>📍 <%= event.prefecture.presence || event.shop&.prefecture.presence || "未設定" %></p>
                </div>

                <div class="mt-3 flex items-center justify-between">
                  <span class="text-[11px] text-slate-500">
                    👥 <%= event.capacity.present? ? "#{event.capacity}人" : "定員未設定" %>
                  </span>

                  <span class="text-xs font-semibold text-sky-600">
                    詳細 →
                  </span>
                </div>
              </div>

            <% end %>
          <% end %>
        </div>
      <% else %>
        <div class="bg-white border border-slate-200 rounded-2xl p-6 text-sm text-slate-500">
          まだイベントがないよ。最初のイベントを投稿してみて！
        </div>
      <% end %>

      <!-- CTA strip -->
      <div class="mt-10 rounded-2xl bg-white border border-slate-200 p-5 sm:p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
        <div>
          <p class="text-sm font-semibold text-slate-900">近くのイベントをまとめて探す</p>
          <p class="text-xs text-slate-500 mt-1">検索・絞り込みでサクッと見つかる</p>
        </div>
        <div class="flex gap-2">
          <%= link_to "イベント検索へ",
                events_path,
                class: "rounded-lg bg-black px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800" %>
          <%= link_to "店舗を見る",
                shops_path,
                class: "rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50" %>
        </div>
      </div>
    </section>
  </main>
</div>