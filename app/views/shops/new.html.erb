<div class="min-h-screen flex flex-col bg-slate-100">
  <main class="flex-1">
    <div class="max-w-3xl mx-auto px-4 py-10">
      <h1 class="text-center text-3xl font-bold mb-2">店舗を登録する</h1>
      <p class="text-center text-slate-500 mb-8">
        店舗情報を入力してください。後から編集機能も追加できます。
      </p>

      <div class="bg-white rounded-2xl shadow-md p-6 sm:p-8">
        <% if @shop.errors.any? %>
          <div class="mb-4 rounded-md bg-red-50 border border-red-200 p-4 text-sm text-red-700">
            <p class="font-semibold mb-1">入力内容にエラーがあります。</p>
            <ul class="list-disc list-inside">
              <% @shop.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <%= form_with model: @shop do |f| %>
          <div class="space-y-4">
            <div>
              <%= f.label :name, "店舗名", class: "block text-sm font-medium text-slate-700 mb-1" %>
              <%= f.text_field :name,
                    class: "block w-full rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                    placeholder: "例）DARTS BAR ○○" %>
            </div>

            <div>
              <%= f.label :description, "店舗説明文", class: "block text-sm font-medium text-slate-700 mb-1" %>
              <%= f.text_area :description,
                    rows: 5,
                    class: "block w-full rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                    placeholder: "雰囲気やコンセプト、リーグ・大会情報などを記入してください。" %>
            </div>

            <div>
              <%= f.label :postal_code, "郵便番号", class: "block text-sm font-medium text-slate-700 mb-1" %>
              <%= f.text_field :postal_code,
                    class: "block w-full max-w-[200px] rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                    placeholder: "例）880-0000" %>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <%= f.label :prefecture, "都道府県", class: "block text-sm font-medium text-slate-700 mb-1" %>
                <%= f.text_field :prefecture,
                      class: "block w-full rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                      placeholder: "例）宮崎県" %>
              </div>
              <div>
                <%= f.label :city, "市区町村", class: "block text-sm font-medium text-slate-700 mb-1" %>
                <%= f.text_field :city,
                      class: "block w-full rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                      placeholder: "例）宮崎市◯◯" %>
              </div>
            </div>

            <div>
              <%= f.label :address, "住所（番地含む）", class: "block text-sm font-medium text-slate-700 mb-1" %>
              <%= f.text_field :address,
                    class: "block w-full rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                    placeholder: "番地・建物名・階数など" %>
            </div>

            <div>
              <%= f.label :phone_number, "電話番号", class: "block text-sm font-medium text-slate-700 mb-1" %>
              <%= f.text_field :phone_number,
                    class: "block w-full max-w-[200px] rounded-md border border-slate-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",
                    placeholder: "例）0985-xxx-xxx" %>
            </div>

            <div class="space-y-1">
              <%= f.label :images, "店舗画像（複数枚OK）", class: "block text-sm font-medium text-slate-700" %>
              <%= f.file_field :images,
                    multiple: true,
                    accept: "image/*",
                    class: "block w-full text-sm text-slate-700" %>

              <% if @shop.images.attached? %>
                <p class="text-xs text-slate-500 mt-1">登録済みの画像：</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  <% @shop.images.each do |image| %>
                    <%= image_tag image.variant(resize_to_fill: [120, 120]),
                          class: "h-20 w-20 rounded object-cover border" %>
                  <% end %>
                </div>
              <% end %>
            </div>

            <div class="pt-2">
              <%= f.submit "店舗を登録する",
                    class: "w-full inline-flex justify-center items-center rounded-md bg-black px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </main>
</div>